/* Pseudo background for media player */
@media not (-moz-pref('nug-features-disabled')) {
	@media not (-moz-pref('nug-features-media-disabled')) {
		#TabsToolbar::before {
			align-self: center !important;
			justify-self: center !important;
			position: absolute !important;
			z-index: -1 !important;
			content: '' !important;
			background: var(--nug-Background-Color);

			width: calc(100%);
			opacity: 0;

			height: 34px;
			top: auto;
			left: auto;
			right: auto !important;
			bottom: 0px;

			border-radius: var(--nug-Border-Radius) !important;
			visibility: visible !important;
			transition: bottom 0.3s ease 100ms, height 0.2s ease, opacity 0.1s ease;
		}

		:root[zen-sidebar-expanded='true'] {
			:has(#zen-media-controls-toolbar[media-sharing='']:hover) {
				#TabsToolbar::before {
					height: 69px !important;
				}
			}

			:has(#zen-media-controls-toolbar:not([media-sharing=''])[media-position-hidden]:hover) {
				#TabsToolbar::before {
					height: 69px;
				}
			}

			:has(#zen-media-controls-toolbar:not([media-sharing='']):not([media-position-hidden]):hover) {
				#TabsToolbar::before {
					height: 107px;
				}

				:has(#zen-media-controls-toolbar[media-position-hidden]) {
					#TabsToolbar::before {
						height: 69px;
					}
				}
			}

			:has(#zen-media-controls-toolbar:not([media-position-hidden])) {
				:has(#zen-media-artist:empty) {
					#TabsToolbar::before {
						height: 93px;
					}
				}
			}

			@media not (-moz-pref('nug-features-bottom-disabled')) {
				@media (-moz-bool-pref: 'nug-bottom-at-bottom') {
					#TabsToolbar::before {
						bottom: calc(var(--zen-toolbox-padding) * 2 + 50px);
					}

					&:has(#zen-sidebar-foot-buttons:hover) {
						&:not(:has(#zen-workspaces-button:hover)) {
							#TabsToolbar::before {
								bottom: calc(var(--zen-toolbox-padding) + 115px) !important;
							}
						}
					}
				}
			}
		}

		:root:not([zen-sidebar-expanded='true']) {
			#TabsToolbar::before {
				width: calc(44px);
				transition: height 1s ease, opacity 0.5s ease !important;
			}

			:has(#zen-media-controls-toolbar[media-position-hidden='true']:hover) {
				#TabsToolbar::before {
					height: 190px;
				}
			}

			:has(#zen-media-controls-toolbar:not([media-position-hidden='true']):hover) {
				#TabsToolbar::before {
					height: 190px;
				}
			}
		}

		:has(#zen-media-controls-toolbar:hover) {
			& #TabsToolbar::before {
				opacity: 1 !important;
			}

			:not(:has([zen-single-toolbar='true']))[zen-compact-mode='true'] {
				@media not (-moz-pref('zen.view.compact.hide-tabbar')) {
					#TabsToolbar::before {
						opacity: 1 !important;
					}
				}
			}

			&[zen-compact-mode='true'] {
				#TabsToolbar::before {
					opacity: 0 !important;
				}
			}
		}
	}
}

@media not (-moz-pref('nug-features-disabled')) {
	@media not (-moz-pref('nug-features-media-disabled')) {
		:root:not([zen-sidebar-expanded='true']) {
			#zen-media-controls-toolbar:not([hidden]),
			#zen-media-controls-toolbar:not([hidden]) > toolbaritem {
				display: flex !important;
			}

			#zen-media-controls-toolbar {
				justify-content: center !important;
				align-content: center !important;
				padding-bottom: 5px !important;
				order: 9999 !important;
				z-index: 99999 !important;

				&[media-sharing=''] {
					& #media-device-buttons {
						display: flex !important;
						flex-direction: column !important;
						position: relative !important;
						/* Centering media sharing buttons */
						justify-items: center !important;
						align-items: stretch !important;
						height: fit-content !important;
					}
				}
			}

			#zen-media-controls-toolbar > toolbaritem {
				flex-direction: column !important;
				position: absolute !important;
				justify-items: center !important;
				align-items: stretch !important;
				justify-content: center !important;
				align-content: center !important;

				width: fit-content !important;

				left: auto !important;

				min-height: unset !important;
				height: 30px !important;

				background: transparent !important;
				box-shadow: 0px 0px 0px var(--nug-Shadow-Color-1) !important;
				backdrop-filter: blur(0px) !important;

				padding: 5px 7px !important;

				transition: height 1s ease, background 1s ease, backdrop-filter 0.3s ease, box-shadow 0.2s ease !important;

				/* Hide media progress bar */
				& #zen-media-progress-hbox {
					display: none !important;
				}

				/* Hide media info */
				& #zen-media-info-vbox {
					display: none !important;
				}

				& #zen-media-controls-hbox {
					display: flex !important;
					flex-direction: column !important;
					justify-items: center !important;
					align-items: stretch !important;
					order: -1 !important;
				}

				& #zen-media-buttons-hbox {
					display: flex !important;
					flex-direction: column !important;
					position: relative !important;

					justify-items: center !important;
					align-items: stretch !important;
					justify-self: center !important;
					align-self: center !important;

					margin: 0px 0px !important;
					padding: 0px 0px !important;
					transform: none !important;
				}

				& .show-on-hover {
					display: flex !important;
					position: relative !important;
					padding: 0px 0px !important;
					transform: none !important;
					top: unset !important;
					bottom: unset !important;

					min-height: fit-content !important;
					max-height: unset !important;
					margin: 0px 0px !important;

					opacity: 1 !important;
				}
			}

			#zen-media-controls-toolbar:not([hidden]):hover {
				& > toolbaritem {
					height: 190px !important;
					background: var(--nug-Blur-Color) !important;
					backdrop-filter: var(--nug-Blur-Simple) !important;
					box-shadow: 0px 0px 5px var(--nug-Shadow-Color-1) !important;
				}
			}
		}
	}
}

@media not (-moz-pref('nug-features-disabled')) {
	@media not (-moz-pref('nug-features-media-disabled')) {
		:root[zen-sidebar-expanded='true'] {
			#zen-media-controls-toolbar {
				margin: 5px 0px !important;
				height: 40px !important;
				width: 100% !important;
				padding: 0px 0px !important;
			}

			#zen-media-controls-toolbar > toolbaritem {
				width: 100% !important;

				& #zen-media-buttons-hbox {
					z-index: 9999 !important;
				}
			}
		}
	}
}

@media not (-moz-pref('nug-features-disabled')) {
	@media not (-moz-pref('nug-features-media-disabled')) {
		#zen-media-controls-toolbar {
			align-self: center !important;
			background: none !important;
			position: relative !important;
			margin: 0px 0px !important;
		}

		#zen-media-controls-toolbar > toolbaritem {
			background: var(--nug-Blur-Color) !important;
			backdrop-filter: var(--nug-Blur-Simple) !important;
			border-radius: var(--nug-Border-Radius) !important;
		}
	}
}
